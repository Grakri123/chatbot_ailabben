<!DOCTYPE html>
<!-- 
  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
  ‚ñà‚ñà                                                                            ‚ñà‚ñà
  ‚ñà‚ñà  üü¢ KL VARME AI CHATBOT - INTEGRASJONSSCRIPT FOR KUNDENS NETTSIDE          ‚ñà‚ñà
  ‚ñà‚ñà                                                                            ‚ñà‚ñà
  ‚ñà‚ñà  ‚úÖ PRODUKSJONSKLAR - FUNGERER 100%                                         ‚ñà‚ñà
  ‚ñà‚ñà  ‚úÖ TESTET OG VERIFISERT                                                    ‚ñà‚ñà  
  ‚ñà‚ñà  ‚úÖ RIKTIG BRANDING: "KL VARME" (ikke Assistant)                           ‚ñà‚ñà
  ‚ñà‚ñà                                                                            ‚ñà‚ñà
  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
-->

<!-- 
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
                            üìã INSTRUKSJONER FOR KUNDEN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üéØ HVORDAN INSTALLERE:
   1. Kopier HELE koden nedenfor (fra <script> til </script>)
   2. Lim inn koden i <head>-seksjonen p√• kundens nettside
   3. ELLER lim inn koden rett f√∏r </body>-taggen
   4. Lagre og publiser nettsiden

üé® HVA SKJER:
   - En gr√∏nn chat-knapp vises nederst til h√∏yre
   - Klikk p√• knappen for √• √•pne chatten  
   - Chatten viser "KL VARME" som tittel
   - AI-assistenten svarer p√• norsk med KL VARME-kunnskap

üîß TEKNISKE DETALJER:
   - Fungerer p√• alle moderne nettlesere
   - Responsiv design (fungerer p√• mobil og desktop)
   - Automatisk cache-busting (f√•r alltid nyeste versjon)
   - Sikker HTTPS-tilkobling
   - GDPR-kompatibel (Mistral AI - europeisk)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->

<!-- ‚¨áÔ∏è KOPIER DENNE KODEN TIL KUNDENS NETTSIDE ‚¨áÔ∏è -->

<script>
// ü§ñ KL VARME AI Chatbot Widget v2.0 - Produksjon
// Automatisk loading med cache-busting og feilh√•ndtering
(function() {
  'use strict';
  
  // üîß Konfigurasjon (ikke endre dette)
  const KLVARME_CONFIG = {
    serverUrl: 'https://klvarmechatbot.ailabben.no',
    widgetVersion: '2.0.1',
    autoInit: true,
    debug: false // Sett til true kun for testing
  };
  
  // üõ°Ô∏è Sikkerhetsjekk - forhindre dobbel-loading
  if (window.KLVARME_LOADING || window.KLVARME_INITIALIZED) {
    if (KLVARME_CONFIG.debug) console.log('KL VARME: Widget allerede lastet');
    return;
  }
  
  window.KLVARME_LOADING = true;
  
  // üìù Debug logging (kun hvis debug er p√•)
  function debugLog(message) {
    if (KLVARME_CONFIG.debug) {
      console.log('üü¢ KL VARME Widget:', message);
    }
  }
  
  debugLog('Starter loading av widget...');
  
  // üöÄ Last widget-script med smart cache-busting
  function loadWidget() {
    const cacheBuster = Date.now() + '_' + Math.random().toString(36).substr(2, 9);
    const widgetUrl = `${KLVARME_CONFIG.serverUrl}/widget.js?v=${KLVARME_CONFIG.widgetVersion}&cb=${cacheBuster}`;
    
    debugLog(`Laster widget fra: ${widgetUrl}`);
    
    const script = document.createElement('script');
    script.src = widgetUrl;
    script.async = true;
    script.defer = true;
    
    // ‚úÖ Success handler
    script.onload = function() {
      debugLog('Widget-script lastet successfully!');
      
      // Vent litt for √• sikre at alt er initialisert
      setTimeout(() => {
        if (window.KLChatbot && typeof window.KLChatbot.init === 'function') {
          try {
            window.KLChatbot.init();
            window.KLVARME_INITIALIZED = true;
            debugLog('Widget initialisert successfully! üéâ');
            
            // Sjekk at tittel er riktig
            setTimeout(() => {
              const titleElement = document.querySelector('.klchat-title');
              if (titleElement) {
                const titleText = titleElement.textContent;
                debugLog(`Widget tittel: "${titleText}"`);
                if (titleText === 'KL VARME') {
                  debugLog('‚úÖ Tittel er korrekt!');
                } else {
                  console.warn('‚ö†Ô∏è KL VARME: Uventet tittel:', titleText);
                }
              }
            }, 1000);
            
          } catch (error) {
            console.error('‚ùå KL VARME: Feil ved initialisering:', error);
          }
        } else {
          console.error('‚ùå KL VARME: Widget ikke funnet etter loading');
        }
        
        window.KLVARME_LOADING = false;
      }, 100);
    };
    
    // ‚ùå Error handler
    script.onerror = function() {
      console.error('‚ùå KL VARME: Kunne ikke laste widget-script');
      console.error('Sjekk at serveren er tilgjengelig:', KLVARME_CONFIG.serverUrl);
      window.KLVARME_LOADING = false;
    };
    
    // üìé Legg til script i DOM
    document.head.appendChild(script);
  }
  
  // üéØ Start loading n√•r DOM er klar
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadWidget);
  } else {
    // DOM er allerede klar
    loadWidget();
  }
  
  // üîç Eksponer debug-funksjon globalt (kun for testing)
  if (KLVARME_CONFIG.debug) {
    window.KLVARME_DEBUG = {
      config: KLVARME_CONFIG,
      reload: function() {
        window.KLVARME_LOADING = false;
        window.KLVARME_INITIALIZED = false;
        document.querySelectorAll('.klchat-widget').forEach(el => el.remove());
        loadWidget();
      }
    };
    debugLog('Debug-modus aktivert. Bruk KLVARME_DEBUG.reload() for √• laste p√• nytt.');
  }
  
})();
</script>

<!-- ‚¨ÜÔ∏è SLUTT P√Ö KODE SOM SKAL KOPIERES ‚¨ÜÔ∏è -->

<!-- 
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
                                üß™ TESTING OG DEBUGGING
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üîç FOR √Ö AKTIVERE DEBUG-MODUS:
   Endre debug: false til debug: true i koden ovenfor

üß™ TESTING CHECKLIST:
   ‚úÖ Widget-knapp vises nederst til h√∏yre (gr√∏nn)
   ‚úÖ Tittel viser "KL VARME" (ikke "KL VARME Assistant")
   ‚úÖ √Öpner chat-vindu n√•r du klikker
   ‚úÖ Viser velkomstmelding: "Velkommen til KL VARME!"
   ‚úÖ AI svarer p√• norsk med KL VARME-informasjon
   ‚úÖ Fungerer p√• b√•de desktop og mobil

üö® HVIS NOE IKKE FUNGERER:
   1. √Öpne Developer Tools (F12)
   2. G√• til Console-fanen
   3. Se etter feilmeldinger
   4. Aktiv√©r debug-modus og test p√• nytt

üìû SUPPORT:
   Hvis du trenger hjelp, ta kontakt med utvikleren
   med skjermbilder av eventuelle feilmeldinger.

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->
