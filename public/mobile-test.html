<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Touch Test - KL Varme Chatbot</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
        }
        .test-button {
            background: #429D0A;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: background 0.3s ease;
        }
        .test-button:hover {
            background: #357A08;
        }
        .test-button:active {
            background: #2d5f07;
        }
        .menu {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        .menu-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        .menu-item:hover {
            background: #f1f5f9;
        }
        .blog-post {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .read-more {
            background: #429D0A;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        .read-more:hover {
            background: #357A08;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Mobile Touch Test - KL Varme Chatbot</h1>
        
        <div class="status success">
            ‚úÖ Widget er lastet med pointer-events fiks
        </div>
        
        <div class="test-section">
            <h2>üß™ Test 1: Touch-knapper</h2>
            <p>Disse knappene skal fungere normalt p√• mobil:</p>
            <button class="test-button" onclick="testButton(1)">Test Knapp 1</button>
            <button class="test-button" onclick="testButton(2)">Test Knapp 2</button>
            <button class="test-button" onclick="testButton(3)">Test Knapp 3</button>
            <div id="button-result"></div>
        </div>
        
        <div class="test-section">
            <h2>üìã Test 2: Dropdown-meny</h2>
            <p>Denne menyen skal √•pnes med ett trykk:</p>
            <div class="menu">
                <div class="menu-item" onclick="toggleMenu()">‚ò∞ Hovedmeny</div>
                <div id="menu-items" style="display: none;">
                    <div class="menu-item" onclick="selectMenuItem('Hjem')">üè† Hjem</div>
                    <div class="menu-item" onclick="selectMenuItem('Produkter')">üõçÔ∏è Produkter</div>
                    <div class="menu-item" onclick="selectMenuItem('Kontakt')">üìû Kontakt</div>
                </div>
            </div>
            <div id="menu-result"></div>
        </div>
        
        <div class="test-section">
            <h2>üì∞ Test 3: Blogg-innlegg med "Les mer"</h2>
            <p>Denne "Les mer"-knappen skal fungere med ett trykk:</p>
            <div class="blog-post">
                <h3>Varmepumper for vinteren</h3>
                <p>Vinteren kommer, og det er viktig √• ha en p√•litelig varmepumpe...</p>
                <button class="read-more" onclick="readMore()">Les mer</button>
            </div>
            <div id="blog-result"></div>
        </div>
        
        <div class="test-section">
            <h2>ü§ñ Chatbot Test</h2>
            <p>Chatbot-knappen skal v√¶re synlig nederst til h√∏yre. Test at:</p>
            <ul>
                <li>‚úÖ Knappen er synlig (gr√∏nn, rund)</li>
                <li>‚úÖ Du kan klikke p√• knappen for √• √•pne chatten</li>
                <li>‚úÖ Du kan lukke chatten med X-knappen</li>
                <li>‚úÖ N√•r chatten er lukket, fungerer alle andre knapper normalt</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2>üìä Test Resultater</h2>
            <div id="test-results">
                <p>Kj√∏r testene ovenfor og se resultatene her...</p>
            </div>
        </div>
    </div>

    <!-- Load the widget -->
    <script src="./widget.js"></script>
    <script>
        // Initialize chatbot
        if (window.KLChatbot) {
            KLChatbot.init();
            console.log('‚úÖ Chatbot initialized');
        } else {
            console.error('‚ùå Chatbot not loaded');
        }
        
        // Test functions
        function testButton(num) {
            const result = document.getElementById('button-result');
            result.innerHTML = `<div class="status success">‚úÖ Knapp ${num} fungerte! Touch-event registrert.</div>`;
            console.log(`Button ${num} clicked`);
        }
        
        function toggleMenu() {
            const menuItems = document.getElementById('menu-items');
            const result = document.getElementById('menu-result');
            
            if (menuItems.style.display === 'none') {
                menuItems.style.display = 'block';
                result.innerHTML = '<div class="status success">‚úÖ Meny √•pnet med ett trykk!</div>';
            } else {
                menuItems.style.display = 'none';
                result.innerHTML = '<div class="status success">‚úÖ Meny lukket!</div>';
            }
        }
        
        function selectMenuItem(item) {
            const result = document.getElementById('menu-result');
            result.innerHTML = `<div class="status success">‚úÖ "${item}" valgt! Touch-event fungerte.</div>`;
            console.log(`Menu item selected: ${item}`);
        }
        
        function readMore() {
            const result = document.getElementById('blog-result');
            result.innerHTML = '<div class="status success">‚úÖ "Les mer" fungerte! Du kan n√• lese hele artikkelen.</div>';
            console.log('Read more clicked');
        }
        
        // Log touch events for debugging
        document.addEventListener('touchstart', function(e) {
            console.log('Touch start:', e.target);
        });
        
        document.addEventListener('click', function(e) {
            console.log('Click:', e.target);
        });
        
        // Check if chatbot is blocking events
        setTimeout(() => {
            const widget = document.querySelector('.klchat-widget');
            const container = document.querySelector('.klchat-container');
            const button = document.querySelector('.klchat-button');
            
            if (widget) {
                const widgetStyle = window.getComputedStyle(widget);
                const containerStyle = window.getComputedStyle(container);
                const buttonStyle = window.getComputedStyle(button);
                
                console.log('=== POINTER EVENTS DEBUG ===');
                console.log('Widget pointer-events:', widgetStyle.pointerEvents);
                console.log('Container pointer-events:', containerStyle.pointerEvents);
                console.log('Button pointer-events:', buttonStyle.pointerEvents);
                
                const results = document.getElementById('test-results');
                let statusHtml = '<h3>üîç Debug Status:</h3>';
                
                if (widgetStyle.pointerEvents === 'none') {
                    console.log('‚úÖ Widget correctly set to pointer-events: none');
                    statusHtml += '<div class="status success">‚úÖ Widget: pointer-events: none (CORRECT)</div>';
                } else {
                    console.warn('‚ö†Ô∏è Widget may be blocking touch events');
                    statusHtml += '<div class="status error">‚ùå Widget: pointer-events: ' + widgetStyle.pointerEvents + ' (WRONG)</div>';
                }
                
                if (buttonStyle.pointerEvents === 'auto') {
                    console.log('‚úÖ Button correctly set to pointer-events: auto');
                    statusHtml += '<div class="status success">‚úÖ Button: pointer-events: auto (CORRECT)</div>';
                } else {
                    console.warn('‚ö†Ô∏è Button may not be clickable');
                    statusHtml += '<div class="status error">‚ùå Button: pointer-events: ' + buttonStyle.pointerEvents + ' (WRONG)</div>';
                }
                
                if (containerStyle.pointerEvents === 'none') {
                    console.log('‚úÖ Container correctly set to pointer-events: none');
                    statusHtml += '<div class="status success">‚úÖ Container: pointer-events: none (CORRECT)</div>';
                } else {
                    console.warn('‚ö†Ô∏è Container may be blocking touch events');
                    statusHtml += '<div class="status error">‚ùå Container: pointer-events: ' + containerStyle.pointerEvents + ' (WRONG)</div>';
                }
                
                results.innerHTML = statusHtml;
                console.log('=== END DEBUG ===');
            }
        }, 1000);
    </script>
</body>
</html>
